<template>
  <div class="doji-pattern-guide">
    <el-card class="guide-card">
      <template #header>
        <div class="guide-header">
          <h3>åå­—æ˜Ÿå½¢æ€è¯†åˆ«åŠŸèƒ½æŒ‡å—</h3>
          <el-tag type="success">æ–°åŠŸèƒ½</el-tag>
        </div>
      </template>

      <div class="guide-content">
        <el-steps :active="currentStep" direction="vertical" finish-status="success">
          <el-step title="äº†è§£åå­—æ˜Ÿå½¢æ€" description="å­¦ä¹ åå­—æ˜Ÿçš„åŸºæœ¬æ¦‚å¿µå’Œç±»å‹">
            <template #icon>
              <span class="step-icon">ğŸ“š</span>
            </template>
          </el-step>
          <el-step title="é…ç½®è¯†åˆ«å‚æ•°" description="æ ¹æ®æ‚¨çš„éœ€æ±‚è°ƒæ•´è¯†åˆ«è®¾ç½®">
            <template #icon>
              <span class="step-icon">âš™ï¸</span>
            </template>
          </el-step>
          <el-step title="è®¾ç½®å½¢æ€æé†’" description="åˆ›å»ºåå­—æ˜Ÿå½¢æ€å‡ºç°æ—¶çš„æé†’">
            <template #icon>
              <span class="step-icon">ğŸ””</span>
            </template>
          </el-step>
          <el-step title="å¼€å§‹ä½¿ç”¨" description="åœ¨è‚¡ç¥¨åˆ†æä¸­æŸ¥çœ‹è¯†åˆ«ç»“æœ">
            <template #icon>
              <span class="step-icon">ğŸš€</span>
            </template>
          </el-step>
        </el-steps>

        <div class="guide-details" v-show="currentStep >= 0">
          <div v-if="currentStep === 0" class="step-content">
            <h4>ä»€ä¹ˆæ˜¯åå­—æ˜Ÿå½¢æ€ï¼Ÿ</h4>
            <p>åå­—æ˜Ÿæ˜¯ä¸€ç§é‡è¦çš„Kçº¿å½¢æ€ï¼Œå…¶å¼€ç›˜ä»·å’Œæ”¶ç›˜ä»·å‡ ä¹ç›¸ç­‰ï¼Œå½¢æˆåå­—å½¢çŠ¶ã€‚</p>

            <div class="pattern-types">
              <div class="pattern-type">
                <span class="pattern-icon">âœ¨</span>
                <div class="pattern-info">
                  <strong>æ ‡å‡†åå­—æ˜Ÿ</strong>
                  <p>å¼€ç›˜ä»·ä¸æ”¶ç›˜ä»·å‡ ä¹ç›¸ç­‰ï¼Œä¸Šä¸‹å½±çº¿é•¿åº¦é€‚ä¸­</p>
                </div>
              </div>
              <div class="pattern-type">
                <span class="pattern-icon">ğŸŒŸ</span>
                <div class="pattern-info">
                  <strong>èœ»èœ“åå­—æ˜Ÿ</strong>
                  <p>å¼€ç›˜ä»·ã€æ”¶ç›˜ä»·å’Œæœ€é«˜ä»·å‡ ä¹ç›¸ç­‰ï¼Œæœ‰è¾ƒé•¿çš„ä¸‹å½±çº¿</p>
                </div>
              </div>
              <div class="pattern-type">
                <span class="pattern-icon">â­</span>
                <div class="pattern-info">
                  <strong>å¢“ç¢‘åå­—æ˜Ÿ</strong>
                  <p>å¼€ç›˜ä»·ã€æ”¶ç›˜ä»·å’Œæœ€ä½ä»·å‡ ä¹ç›¸ç­‰ï¼Œæœ‰è¾ƒé•¿çš„ä¸Šå½±çº¿</p>
                </div>
              </div>
              <div class="pattern-type">
                <span class="pattern-icon">ğŸ’«</span>
                <div class="pattern-info">
                  <strong>é•¿è…¿åå­—æ˜Ÿ</strong>
                  <p>ä¸Šä¸‹å½±çº¿éƒ½å¾ˆé•¿çš„åå­—æ˜Ÿï¼Œè¡¨ç¤ºå¸‚åœºæ³¢åŠ¨å‰§çƒˆ</p>
                </div>
              </div>
            </div>
          </div>

          <div v-if="currentStep === 1" class="step-content">
            <h4>é…ç½®è¯†åˆ«å‚æ•°</h4>
            <p>æ‚¨å¯ä»¥åœ¨è®¾ç½®é¡µé¢è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š</p>
            <ul>
              <li><strong>æ•æ„Ÿåº¦é˜ˆå€¼ï¼š</strong>æ§åˆ¶è¯†åˆ«çš„ä¸¥æ ¼ç¨‹åº¦</li>
              <li><strong>ä»·æ ¼ç›¸ç­‰å®¹å·®ï¼š</strong>å¼€ç›˜ä»·ä¸æ”¶ç›˜ä»·çš„æœ€å¤§å·®å¼‚</li>
              <li><strong>é•¿è…¿é˜ˆå€¼ï¼š</strong>é•¿è…¿åå­—æ˜Ÿçš„å½±çº¿é•¿åº¦è¦æ±‚</li>
              <li><strong>æœ€å°æ˜¾è‘—æ€§ï¼š</strong>åªæ˜¾ç¤ºæ˜¾è‘—æ€§é«˜äºæ­¤å€¼çš„å½¢æ€</li>
            </ul>
            <el-button type="primary" @click="goToSettings">å‰å¾€è®¾ç½®é¡µé¢</el-button>
          </div>

          <div v-if="currentStep === 2" class="step-content">
            <h4>è®¾ç½®å½¢æ€æé†’</h4>
            <p>åˆ›å»ºæé†’ä»¥ä¾¿åœ¨åå­—æ˜Ÿå½¢æ€å‡ºç°æ—¶åŠæ—¶é€šçŸ¥æ‚¨ï¼š</p>
            <ul>
              <li>é€‰æ‹©è¦ç›‘æ§çš„è‚¡ç¥¨</li>
              <li>é€‰æ‹©æ„Ÿå…´è¶£çš„åå­—æ˜Ÿç±»å‹</li>
              <li>è®¾ç½®æœ€å°æ˜¾è‘—æ€§è¦æ±‚</li>
              <li>é€‰æ‹©é€šçŸ¥æ–¹å¼</li>
            </ul>
            <el-button type="primary" @click="goToAlerts">åˆ›å»ºæé†’</el-button>
          </div>

          <div v-if="currentStep === 3" class="step-content">
            <h4>å¼€å§‹ä½¿ç”¨</h4>
            <p>ç°åœ¨æ‚¨å¯ä»¥ï¼š</p>
            <ul>
              <li>åœ¨è‚¡ç¥¨åˆ†æé¡µé¢æŸ¥çœ‹è¯†åˆ«å‡ºçš„åå­—æ˜Ÿå½¢æ€</li>
              <li>æŸ¥çœ‹å½¢æ€çš„è¯¦ç»†ä¿¡æ¯å’Œåç»­ä»·æ ¼èµ°åŠ¿</li>
              <li>ä½¿ç”¨ç­›é€‰åŠŸèƒ½æ‰¾åˆ°å‡ºç°åå­—æ˜Ÿåä¸Šæ¶¨çš„è‚¡ç¥¨</li>
              <li>åˆ†æä¸åŒç±»å‹åå­—æ˜Ÿçš„æˆåŠŸç‡</li>
            </ul>
            <el-button type="success" @click="goToAnalysis">å¼€å§‹åˆ†æ</el-button>
          </div>
        </div>

        <div class="guide-navigation">
          <el-button @click="prevStep" :disabled="currentStep <= 0">ä¸Šä¸€æ­¥</el-button>
          <el-button type="primary" @click="nextStep" :disabled="currentStep >= 3"
            >ä¸‹ä¸€æ­¥</el-button
          >
        </div>
      </div>
    </el-card>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useRouter } from 'vue-router'

const router = useRouter()
const currentStep = ref(0)

const nextStep = () => {
  if (currentStep.value < 3) {
    currentStep.value++
  }
}

const prevStep = () => {
  if (currentStep.value > 0) {
    currentStep.value--
  }
}

const goToSettings = () => {
  router.push('/doji-pattern/settings')
}

const goToAlerts = () => {
  router.push('/doji-pattern/alerts')
}

const goToAnalysis = () => {
  router.push('/stock')
}
</script>

<style scoped>
.doji-pattern-guide {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
}

.guide-card {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.guide-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.guide-header h3 {
  margin: 0;
  color: #303133;
}

.guide-content {
  padding: 20px 0;
}

.step-icon {
  font-size: 20px;
}

.guide-details {
  margin-top: 30px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
}

.step-content h4 {
  color: #303133;
  margin-bottom: 16px;
}

.step-content p {
  color: #606266;
  line-height: 1.6;
  margin-bottom: 16px;
}

.step-content ul {
  color: #606266;
  line-height: 1.6;
  margin-bottom: 20px;
}

.step-content li {
  margin-bottom: 8px;
}

.pattern-types {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 16px;
  margin-top: 20px;
}

.pattern-type {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  background: white;
  border-radius: 8px;
  border: 1px solid #e4e7ed;
}

.pattern-icon {
  font-size: 24px;
  flex-shrink: 0;
}

.pattern-info strong {
  display: block;
  color: #303133;
  margin-bottom: 4px;
}

.pattern-info p {
  margin: 0;
  font-size: 14px;
  color: #909399;
  line-height: 1.4;
}

.guide-navigation {
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
  padding-top: 20px;
  border-top: 1px solid #e4e7ed;
}

:deep(.el-steps) {
  margin-bottom: 0;
}

:deep(.el-step__description) {
  color: #909399;
  font-size: 14px;
}
</style>
